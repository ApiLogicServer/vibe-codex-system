{% extends "base.html" %}
{% block content %}
<h1>Order #{{ order.id }}</h1>
<p><strong>Customer:</strong> {{ order.customer.name }}</p>
<p><strong>Notes:</strong> {{ order.notes or 'â€”' }}</p>
<p><strong>Total:</strong> ${{ '%.2f'|format(order.amount_total) }}</p>
<p><strong>Status:</strong>
  {% if order.date_shipped %}
    Shipped on {{ order.date_shipped.strftime('%Y-%m-%d %H:%M') }}
  {% else %}
    Pending
  {% endif %}
</p>
{% if not order.date_shipped %}
  <form action="{{ url_for('web.ship_order', order_id=order.id) }}" method="post">
    <button type="submit">Mark as Shipped</button>
  </form>
{% endif %}

<h2>Items</h2>
<table>
  <thead>
    <tr>
      <th>Product</th>
      <th>Quantity</th>
      <th>Unit Price</th>
      <th>Amount</th>
    </tr>
  </thead>
  <tbody>
    {% for item in order.items %}
      <tr>
        <td>{{ item.product.name }}</td>
        <td>{{ item.quantity }}</td>
        <td>${{ '%.2f'|format(item.unit_price) }}</td>
        <td>${{ '%.2f'|format(item.amount) }}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
